
{% extends 'reused_templates/base.html' %}

{% load static %}

{% block td_nav %}
  <td style="padding: 0 10px;"><a href="/display/{{db}}">Collections</a></td>
  {% if not add_model %}
    <td style="padding: 0 10px;">
      <a href="/display/{{db}}/{{collection}}">Documents</a>
    </td>
  {% endif %}
{% endblock %}

{% block h %}
  <h2>
    Define the documents model of the collection '{{collection}}'
  </h2>
{% endblock %}

{% block content %}
  <table style="margin: auto;">     
    <form action="/doc_model/{{db}}/{{collection}}" method="POST">
      {% csrf_token %}
      {% for attr, attr_dict in model.items %}
        <tr>
          <td style="padding: 0 5px;">
            Attribute {{forloop.counter}}: <input type="text" name="{{attr}}" value="{{attr_dict.name}}">
          </td>
          <td>
            <select class="select" name="{{attr}}_type">
              <option value="str" {% if attr_dict.type == 'str' %}selected{% endif %}>string</option>
              <option value="int" {% if attr_dict.type == 'int' %}selected{% endif %}>int</option>
              <option value="float" {% if attr_dict.type == 'float' %}selected{% endif %}>float</option>
            </select>
          </td>
          <td>
            <button type="submit" class="button" style="padding: 1px 3px; margin: 0;" name="remove" value="{{attr}}">
              <img src="{% static 'icons/delete.ico' %}" alt="remove" width="25px" height="25px">
            </button>
          </td>
        </tr>
      {% endfor %}
        <tr>
          <td style="text-align: left;">
            <button type="submit" class="button" style="padding: 1px 3px; margin: 0;" name="add"> 
              <img src="{% static 'icons/add.ico' %}" alt="add" width="25px" height="25px">
            </button>
          </td>
            <td colspan="2" style="text-align: right;">
              <button type="submit" class="button" style="padding: 1px 3px; margin: 0;" name="save"> 
                Save
              </button>
            </td>
        </tr>
    </form>
  </table>
{% endblock %}


